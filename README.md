IOT项目相关代码


一.系统分区
参考修改partinfo_8910_8m_opencpu_novolte.json

2024/11/2
六轴调试：
1.调试了算法库，出厂参数校准，获取欧拉角。
2.震动检测逻辑调试，传感器休眠逻辑。

硬件调试：
一.GPIO
1.蓝牙连接


GPS算法
1.数据有效
2.数据无效

***需要加换行
at+qdbgcfg="tracecfg",0,2 切换USB输出
at+qdbgcfg="tracecfg",0,1 切换debug输出

1/11
IOT平台协议问题：
1.里程清除？
2.充电信息？
3.卡路里不清晰,
4.踏频数据没有,
5.密码设置？

下周计划
调试震动功能逻辑， 无感解锁控制逻辑及算法， 


2/7
IOT开发
GPS测试


计划
整体代码逻辑优化
1.错误报警
2.激活逻辑(使用信号量阻塞，取消激活需要重启)
3.摔倒震动检测
4.GPS回传
5.蓝牙协议

2/11
更新IOT端蓝牙无感解锁功能
摔倒和扶起检测(已加)
船运模式
升级加超时处理

2/13
MQTT协议这块，搭建协议测试环境

2/19
调试逻辑
1.休眠逻辑


2/20计划
主要1.调试休眠这块，移动，摔倒，扶起检测这些功能。
2.MQTT指令这些，蓝牙APP联调。

2/21
进入休眠时cat1无法烧录
bug:
cat1到时没有进入休眠，蓝牙休眠重启（加了RTC加喂狗已正常）
cat1唤醒后出现重启（中断里面不能有信号量这些）
把cat1低功耗逻辑重点测试下
调试摔倒扶起检测算法

sensor正反面需要设置参数，不仍角度异常

休眠，移动，摔倒扶起已验证OK

MQTT协议
每一个指令进行调试，打印出来
网络信息，考虑直接用AT透传。。。


2/22
BUG，实时操作应答seq不对

CAT1几个问题：
1.切换到其他小区是否会重新注网。